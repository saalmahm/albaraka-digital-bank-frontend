<div class="client-dashboard">
  <div class="dashboard-shell">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="user-block" *ngIf="account as acc">
        <div class="avatar-circle">
          <span>{{ acc.ownerFullName[0] || 'C' }}</span>
        </div>
        <div class="user-info">
          <div class="user-name">{{ acc.ownerFullName }}</div>
          <div class="user-email">{{ acc.ownerEmail }}</div>
        </div>
      </div>

      <nav class="sidebar-menu">
        <a routerLink="/client" routerLinkActive="active">
          <span class="icon">üè†</span>
          <span>Dashboard</span>
        </a>
        <a routerLink="/client/deposit" routerLinkActive="active">
          <span class="icon">‚ûï</span>
          <span>D√©p√¥t</span>
        </a>
        <!-- Liens placeholder pour plus tard -->
        <a>
          <span class="icon">üìÑ</span>
          <span>Mes relev√©s</span>
        </a>
        <a>
          <span class="icon">üîî</span>
          <span>Notifications</span>
        </a>
      </nav>
            <div class="sidebar-footer">
        <button class="logout-btn" (click)="onLogout()">
          <span class="icon">‚èª</span>
          <span>Se d√©connecter</span>
        </button>
      </div>
    </aside>

    <!-- Contenu principal -->
    <main class="main-area">
      <header class="main-header">
        <h1>Dashboard client</h1>
        <p class="subtitle">
          Vue d‚Äôensemble de votre compte et de vos derni√®res op√©rations.
        </p>
      </header>

      <!-- Cartes de r√©sum√© -->
      <section class="summary-cards">
        <!-- Solde -->
        <div class="summary-card primary">
          <div class="summary-title">Solde courant</div>
          <div class="summary-value">
            <ng-container *ngIf="!isLoadingAccount && !errorAccount && account as acc">
              {{ acc.balance | number:'1.2-2' }} DH
            </ng-container>
            <ng-container *ngIf="isLoadingAccount">...</ng-container>
          </div>
          <div class="summary-footer">Compte principal</div>
        </div>

        <!-- Nombre d'op√©rations -->
        <div class="summary-card">
          <div class="summary-title">Op√©rations</div>
          <div class="summary-value">
            {{ totalElements || operations.length }}
          </div>
          <div class="summary-footer">dans l‚Äôhistorique charg√©</div>
        </div>

        <!-- Op√©rations en attente -->
        <div class="summary-card">
          <div class="summary-title">En attente</div>
          <div class="summary-value">
            {{ pendingCount }}
          </div>
          <div class="summary-footer">en validation</div>
        </div>

    <!-- D√©p√¥ts valid√©s -->
    <div class="summary-card">
      <div class="summary-title">D√©p√¥ts valid√©s</div>
      <div class="summary-value">
        {{ validatedDepositsCount }}
      </div>
      <div class="summary-footer">sur la p√©riode charg√©e</div>
    </div>
      </section>

      <!-- Bloc historique (tableau existant) -->
      <section class="operations-panel">
        <div class="panel-header">
          <h2>Historique des op√©rations</h2>
          <button class="secondary-btn" routerLink="/client/deposit">
            Effectuer un d√©p√¥t
          </button>
        </div>

        <div *ngIf="isLoadingOperations" class="info-text">
          Chargement de l'historique des op√©rations...
        </div>
        <div *ngIf="errorOperations" class="error-message">
          {{ errorOperations }}
        </div>

        <table *ngIf="!isLoadingOperations && !errorOperations && operations.length > 0">
          <thead>
            <tr>
              <th>Date cr√©ation</th>
              <th>Type</th>
              <th>Montant</th>
              <th>Statut</th>
              <th>Compte source</th>
              <th>Compte destination</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let op of operations">
              <td>{{ op.createdAt | date:'short' }}</td>
              <td>{{ op.type }}</td>
              <td>{{ op.amount | number:'1.2-2' }} DH</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusClass(op.status)">
                  {{ op.status }}
                </span>
              </td>
              <td>{{ op.accountSourceNumber }}</td>
              <td>{{ op.accountDestinationNumber || '-' }}</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="!isLoadingOperations && !errorOperations && operations.length === 0" class="info-text">
          Aucune op√©ration trouv√©e.
        </div>

        <div *ngIf="totalPages > 1" class="pagination">
          <button (click)="goToPage(page - 1)" [disabled]="page === 0">Pr√©c√©dent</button>
          <span>Page {{ page + 1 }} / {{ totalPages }}</span>
          <button (click)="goToPage(page + 1)" [disabled]="page + 1 >= totalPages">Suivant</button>
        </div>
      </section>
    </main>
  </div>
</div>